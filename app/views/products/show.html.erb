<p id="notice"><%= notice %></p>


<div class="row">
  <div class="col-md-3">
  </div>
  <div class="col-md-3">

    <%=image_tag @product.photo, size:"400x400" %>
  </div>

  <div class="col-md-3">
    <hr>
      <p>
        <strong>Description:</strong><br>
        <%= @product.description %>
      </p>

    <hr>
      <p>
        <strong>Price:</strong><br>
        $ <%= @product.price %>
      </p>
      <hr>


    <%= form_tag charges_path do %>
      <article>
        <% if flash[:error].present? %>
          <div id="error_explanation">
            <p><%= flash[:error] %></p>
          </div>
        <% end %>
        <label class="amount">
          <span>Amount: <% @product.price %></span>
        </label>
      </article>

      <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
              data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
              data-description="A month's subscription"
              data-amount="<%= @product.price * 100 %> "
              data-locale="auto"></script>
    <% end %>

    <p>
      <strong>Review:</strong><br>
        <%= render @product.reviews %>
        <%= link_to "Add reviews", new_product_review_path(@product), class: "btn-custom"  %>
    </p>

    <%= link_to 'Edit', edit_product_path(@product) %> |
    <%= link_to 'Back', products_path %>

  </div>


  <div class="col-md-3">
  </div>

  <!-- review -->
  <div class="col-md-2"></div>
  <div class="col-md-8">

  <hr>
  <div class="reviews">
      <strong>Review:</strong><br>
      <%= render @product.reviews %>
  </div>

  <hr>

  </div>
  <div class="col-md-2"> </div>
</div>


<script>
  $('.review-rating').raty({
    readOnly: true,
    score: function(){
       return $(this).attr('data-score');
    },
    path: '/assets/'
  });

    $('#rating-form').raty({
      path: '/assets/',
      scoreName: 'review[rating]'
    });

</script>
